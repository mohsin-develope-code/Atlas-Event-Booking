

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Atlas Entry Pass</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">



<style>


*{
  box-sizing:border-box;
  padding: 0;
    margin: 0;
    color: #000;
}



body{
  font-family: 'Poppins', system-ui;
  background: radial-gradient(600px 300px at 10% 20%, rgba(0,212,255,0.06), transparent),
              radial-gradient(600px 300px at 90% 80%, rgba(255,77,184,0.04), transparent),
              var(--bg);
  background-color: #E0E0E0;
  display:flex;
  flex-direction: column;
  align-items:center;
  justify-content:center;
}


.page-container{
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 30px;
}


.container{
  width:100%;
  max-width:980px;
  display:flex;
  gap:24px;
  flex-direction:column;
  align-items:center;
  justify-content: center;
}



.ticket-wrap{
  width:100%;
  height: 80%;
  margin: auto;
  gap:10px;
}


.ticket{
  background-color: #fff;
  padding:15px 22px 30px 22px;
  border-right: 1px dashed #B4B4B4;
  border-left: 1px dashed #B4B4B4;
  border-bottom: 1px dashed #B4B4B4;
  box-shadow: 0 20px 40px rgba(3,8,18,0.6);
  position:relative;
  overflow:hidden;
  border-bottom-left-radius: 18px;
  border-bottom-right-radius: 18px;
}
.ticket::after{
  content:'';position:absolute;inset:0;pointer-events:none;
}
.ticket-main{display:flex;flex-direction:column;gap:18px;position:relative}

.title-row{
  display:flex;
  align-items:center;
  justify-content: center;
  gap:16px
}

.event-badge{
  min-width:78px;height:78px;border-radius:12px;
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  display:flex;align-items:center;justify-content:center;font-weight:800;color:#051426;font-size:0.85rem;
}
.event-info{flex:1}

.event-title{
   color: White;
   font-size:1.5rem; 
   font-weight: 700; 
   margin:0;
   /* text-transform:uppercase; */
   line-height:1
  }

.tagline{margin-top:10px;color:rgba(230,238,248,0.8);font-weight:600;font-size:0.9rem}

.details-grid{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:10px;
  margin-top: 0px;
  /* background-color: white;  */
}

.detail{
  /* background-color: white; */
  padding: 0 10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.03)
}


.label{
  font-size: 0.7rem;
  color: #CF3D3E;
  font-weight: 600;
}

.detail {
  font-size:0.9rem;
  color: white;
}

.detail{
  margin-top:6px;
  font-weight:500;
  font-size:0.90rem
}

.value{
  color: #3d3d3d;
  margin-top:4px;
  font-weight:500;
  font-size:1rem
}

.footer-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin:8px
}

.count-pill{background:rgba(255,255,255,0.03);padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,0.04);font-weight:700}
.actions{display:flex;gap:12px}

.btn{
  background-color: #CF3D3E;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
  color:#fff;
}

.btn:hover{
  transform: scale(1.05); 
  transition: ease-in; 
  box-shadow: 0 4px 14px rgba(0,0,0,0.2);
}

.btn:active {
  transform: scale(0.97);
}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:rgba(230,238,248,0.9)}


.details-grid h1 {
  text-align: end;
}


.back-btn{
  background-color: #CF3D3E;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
  color:#fff  
}

.back-btn:hover{
  transform: scale(1.05); transition: ease-in-out; box-shadow: 0 4px 14px rgba(0,0,0,0.2);
}

.btn:active {
  transform: scale(0.97);
}



.stub{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:14px;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid var(--muted);
}
.stub .qr{width:140px;height:140px;background:white;border-radius:12px;display:flex;align-items:center;justify-content:center;overflow:hidden}
/* simple css QR placeholder */
.qr::before{content:'';width:90px;height:90px;background-image:linear-gradient(45deg,#000 25%, transparent 25%, transparent 75%, #000 75%, #000), linear-gradient(45deg,#000 25%, transparent 25%, transparent 75%, #000 75%, #000);background-size:10px 10px;background-position:0 0,5px 5px}
.stub .ticket-no{margin-top:14px;font-family:Orbitron, monospace;color:var(--accent2);font-weight:800}

/* Notch effect */
.notch{position:absolute;right:320px;top:50%;transform:translateY(-50%);width:24px;height:48px;background:transparent;border-radius:999px;box-shadow:inset 8px 0 0 var(--bg)}

/* Responsive */
@media (max-width:880px){
  .ticket-wrap{grid-template-columns:1fr 260px}
  .notch{right:260px}
}
@media (max-width:720px){

  .page-container{ padding: 20px; gap: 30px}

  .ticket-wrap{grid-template-columns:1fr; padding: 0 30px;}
  .notch{display:none}
  .ticket{padding:18px}
  .title-row{flex-direction:row;gap:12px}
  .event-badge{width:64px;height:64px}
  .details-grid{grid-template-columns:1fr 1fr}
  .stub{order:2;width:100%}
}
@media (max-width:420px){

  .event-title{font-size:1.15rem}
  .details-grid{grid-template-columns:1fr}
  .event-badge{width:56px;height:56px}
}

/* Print */
@media print{
  body{background:white;color:black}
  .btn{display:none}.stub .qr{background:#eee}
}


.loader {
  width: 18px;
  height: 18px;
  border: 3px solid #fff;
  border-top-color: transparent;
  border-radius: 50%;
  display: none;
  animation: spin 0.7s linear infinite;
}


</style>


<style>
  .line{
    border-top: 1px solid #cac9c9;
    padding: 0 28px;
  }
</style>

</head>



<body>


<div class="page-container">


    <div class="ticket-wrap">

      <div style="background-color: #CF3D3E; padding: 20px; border-top-right-radius: 30px; border-top-left-radius: 30px; text-align: center;">
              <div class="title-row">
               <div class="event-info">
                 <div class="event-title">Free Entry Pass</div>
               </div>

              <div style="background-color: white; display: flex; align-items: center; justify-content: center; width: 80px; height: 80px; border-radius: 50%;">
                <img style="width: 100%; height: auto; object-fit: contain;" src="img/atlas-pass-logo.png" alt="">
               </div>
              </div>
          </div>

      <div class="ticket" role="article">
        <div class="ticket-main">

           <div class="details-grid"> 
               <div class="detail"><div class="label">Name</div><div id="name-local" class="value">MoXXX</div></div>
               <div id="name-local" class="event-title">Free Entry Pass</div>
            </div>

            
               <div style="padding: 0 8px;">
                  <div class="line"></div>
                </div>

            <div class="detail"><div class="label">PHONE NUMBER</div><div id="phone-local" class="value">6388XXXXXXX</div></div>

            <div style="padding: 0 8px;">
                  <div class="line"></div>
                </div>

               <div class="details-grid">
                <div class="detail">
                 <div class="label">DATE</div><div id="pass-name" class="value">Jan 18, 2026</div></div>
                <div class="detail"><div class="label">TIME</div><div class="value">10:00 AM Onwards</div></div>
               </div>

               <div style="padding: 0 8px;">
                  <div class="line"></div>
                </div>


                <div class="detail"><div class="label">VENUE</div>
                        <div class="value">The Hotel Landmark Tower<br>
                             <p style="padding: 1px 0; color: #727171dc; font-weight: 400;">Near Naveen Market, kanpur</p>
                        </div>
                </div>



          </div>

        </div>
      </div>


    </div>


    <div class="footer-row">
           
             <div class="actions">
              <a href="index.html"><button class="back-btn">Back To Home</button></a>
            </div>
            <div class="actions">
              <button type="button" class="btn" id="downloadBtn" onclick="downloadTicketClicked()">Download PDF</button>
            </div>

    </div>




  </div>


  







  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>





<script>




//--------------------------------------
//        Manipulate pass value
//--------------------------------------


document.addEventListener("DOMContentLoaded", function () {  

  document.getElementById('phone-local').textContent = localStorage.getItem('phone')
  document.getElementById('name-local').textContent = localStorage.getItem('name')


  const wrapper = document.getElementById('friend-local');

wrapper.innerHTML = "";

details.forEach(item => {
  const li = document.createElement("li");
  li.className = "value";
  li.textContent = `${item.name}`;
  wrapper.appendChild(li);
});

})












 //-------------------------------------------------------------
 //             Download PDF
 //-------------------------------------------------------------

 
const downloadBtn = document.getElementById('downloadBtn');

async function generatePdfBlobFromNode() {
  const node = document.querySelector('.ticket-wrap');
  if (!node) throw new Error('Ticket element not found');

  const prevTransition = node.style.transition;
  node.style.transition = 'none';

  const canvas = await html2canvas(node, {
    scale: 3, // high quality
    useCORS: true,
    backgroundColor: "#fff",
    scrollY: -window.scrollY
  });

  node.style.transition = prevTransition;

  const imgData = canvas.toDataURL('image/png');

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({
    orientation: 'portrait',
    unit: 'pt',
    format: 'a4'
  });

  const pageWidth = pdf.internal.pageSize.getWidth();
  const pageHeight = pdf.internal.pageSize.getHeight();

  // 50% of page
  const maxWidth = pageWidth * 0.5;
  const maxHeight = pageHeight * 0.5;

  // px â†’ pt
  const imgWidth = canvas.width * 0.75;
  const imgHeight = canvas.height * 0.75;

  // Preserve aspect ratio
  const scale = Math.min(
    maxWidth / imgWidth,
    maxHeight / imgHeight
  );

  // ROUND values (critical fix)
  const renderWidth = Math.floor(imgWidth * scale);
  const renderHeight = Math.floor(imgHeight * scale);

  // Small safe padding to avoid clipping
  const safePadding = 1; // pt

  const x = Math.round((pageWidth - renderWidth) / 2);
  const y = Math.round((pageHeight - renderHeight) / 2);

  // Draw image
  pdf.addImage(
    imgData,
    'PNG',
    x + safePadding,
    y + safePadding,
    renderWidth - safePadding * 2,
    renderHeight - safePadding * 2,
    undefined,
    'FAST'
  );

  return pdf.output('blob');
}

async function downloadTicketClicked() {
  try {
    downloadBtn.classList.add('loading');

    const blob = await generatePdfBlobFromNode();
    const url = URL.createObjectURL(blob);

    const link = document.createElement('a');
    link.href = url;
    link.download = `ticket-${Date.now()}.pdf`;
    document.body.appendChild(link);
    link.click();

    setTimeout(() => {
      link.remove();
      URL.revokeObjectURL(url);
    }, 500);

  } catch (err) {
    console.error(err);
    alert('Ticket download failed');
  } finally {
    downloadBtn.classList.remove('loading');
  }
}





</script>

</body>


</html>
